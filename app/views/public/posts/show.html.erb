<body class= "post-show-content">
  <div class= "container-fluid">
    <div class= "row">
      <div class= "col-sm-12 col-md-12 col-lg-12">
        <div class= "post-show-page">
          <div class= "items">

            <div><%= image_tag @post.get_imege_full(800,800) %></div>
            <!--閲覧数～レートの表示-->
            <h4 class= "item1">
              <span><%= @post.view_counts.count %><i class="fas fa-heart" style="color: rgba(255,129,137,100);"></i></span>
              <span><%= render "yell_button", post: @post %></span>

            <% if @post.member == current_member %>
              <%= link_to "編集する", edit_post_path, class: "btn btn-success"%>
            <% end %>
              <!--レート機能の情報を持ってきています-->
              <span><%= render "star", post: @post %></span>
            </h4>

            <!--タイトルの横にタグを設置。あとでタグクリックで一覧に飛ぶようにリンクを追加する-->
            <h3 class= "item2"><%= @post.title %>
              <span class= "tag-name">
                <% @post_tags.each do |tag| %>
                <%= tag.name %>
                <% end %>
              </span>
            </h3>
            <!--制作日-->
            <h6><%= l @post.created_at %></h6>
            <!--作品紹介-->
            <h6 class= "body"><%= @post.body %></h6>
            <!--アピールポイント-->
            <h5 class= "point-time">ここ見て！</h5>
            <h6><%= @post.appeal_point %></h6>

            <h5>改善点</h5>
            <h6><%= @post.improve_point %></h6>

            <h5>制作時間</h5>
            <h6>
              <%= @post.production_time %>
              <span><%= @post.unit_i18n %></span>
            </h6>

            <div class= "comment-area">
            <h3>コメント</h3>

            <table>
              <!--1、コメントしたメンバーのアイコン＋コメント-->
              <% @post.post_comments.each do |post_comment| %>
                    <tr>
                      <td><%= image_tag post_comment.member.get_profile_image(100,100) %></td>
                      <% if post_comment.is_deleted == false %>
                        <td class= "comment"><%= post_comment.comment %></td>
                      <% else %>
                        <td class= "comment">このコメントは不適切と判断されたため、管理者によって削除されました。</td>
                      <% end %>
                    </tr>


              <!--コメントしたメンバーの名前(マイページリンク付き)-->
                    <tr>
                      <td class= "comment-member">
                        <%= link_to member_path(post_comment.member.id) do %>
                          <%= post_comment.member.name %>
                        <% end %>
                      </td>

                      <td class= "delete-btn">
                    <!--コメント削除機能-->
                        <% if post_comment.member == current_member %>
                          <%= link_to post_post_comment_path(post_comment.post, post_comment), method: :delete,data: {confirm: "コメントを削除しますか？" } do %>
                            <button type="button" class="btn btn-danger btn-sm">コメント削除</button>
                          <% end %>
                        <% end %>
                      </td>
                    </tr>
              <% end %>
            </table>
            <!--コメント投稿エリア-->
              <div class= "comment-text">
                <%= form_with(model: [@post, @post_comment] ) do |f| %>
                  <div><%= f.text_area :comment, placeholder: 'コメントを入力して下さい(200文字以内)', maxlength: 200, cols: 50, rows: 5 %></div>
                  <div><%= f.submit 'コメント送信' %></div>
                <% end %>
              </div>
            </div>

          <!--class="items"終了-->
          </div>

        </div>
      </div>
    </div>
  </div>
</body>